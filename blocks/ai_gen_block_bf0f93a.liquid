{% doc %}
  @prompt
    Create a wishlist heart icon with absolute positioning that places it specifically behind the search icon at the top. Use CSS position absolute with specific top and right coordinates to layer the heart behind the search icon. The heart should be partially visible at the top edge of the search icon area with a lower z-index value to stay behind the search functionality.

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-wishlist-heart-{{ ai_gen_id }} {
    position: absolute;
    top: {{ block.settings.top_position }}px;
    right: {{ block.settings.right_position }}px;
    z-index: {{ block.settings.z_index }};
    width: {{ block.settings.heart_size }}px;
    height: {{ block.settings.heart_size }}px;
    color: {{ block.settings.heart_color }};
    opacity: {{ block.settings.opacity | divided_by: 100.0 }};
    transition: all 0.3s ease;
    pointer-events: none;
  }

  .ai-wishlist-heart-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    fill: currentColor;
  }

  @media screen and (max-width: 749px) {
    .ai-wishlist-heart-{{ ai_gen_id }} {
      top: {{ block.settings.mobile_top_position }}px;
      right: {{ block.settings.mobile_right_position }}px;
      width: {{ block.settings.mobile_heart_size }}px;
      height: {{ block.settings.mobile_heart_size }}px;
    }
  }

  {% if block.settings.show_pulse %}
    .ai-wishlist-heart-{{ ai_gen_id }} {
      animation: ai-wishlist-pulse-{{ ai_gen_id }} 2s infinite;
    }

    @keyframes ai-wishlist-pulse-{{ ai_gen_id }} {
      0%, 100% {
        transform: scale(1);
        opacity: {{ block.settings.opacity | divided_by: 100.0 }};
      }
      50% {
        transform: scale(1.1);
        opacity: {{ block.settings.opacity | divided_by: 100.0 | times: 1.3 | at_most: 1 }};
      }
    }
  {% endif %}

  {% if block.settings.show_glow %}
    .ai-wishlist-heart-{{ ai_gen_id }} {
      filter: drop-shadow(0 0 {{ block.settings.glow_intensity }}px {{ block.settings.heart_color }});
    }
  {% endif %}
{% endstyle %}

<div
  class="ai-wishlist-heart-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="currentColor"
    aria-hidden="true"
  >
    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
  </svg>
</div>

{% schema %}
{
  "name": "Wishlist heart icon",
  "settings": [
    {
      "type": "header",
      "content": "Position"
    },
    {
      "type": "range",
      "id": "top_position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Top position",
      "default": 10
    },
    {
      "type": "range",
      "id": "right_position",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Right position",
      "default": 60
    },
    {
      "type": "range",
      "id": "z_index",
      "min": 1,
      "max": 10,
      "step": 1,
      "label": "Layer depth",
      "default": 5
    },
    {
      "type": "header",
      "content": "Mobile position"
    },
    {
      "type": "range",
      "id": "mobile_top_position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Top position",
      "default": 8
    },
    {
      "type": "range",
      "id": "mobile_right_position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Right position",
      "default": 50
    },
    {
      "type": "header",
      "content": "Appearance"
    },
    {
      "type": "range",
      "id": "heart_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Heart size",
      "default": 24
    },
    {
      "type": "range",
      "id": "mobile_heart_size",
      "min": 14,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Mobile heart size",
      "default": 20
    },
    {
      "type": "color",
      "id": "heart_color",
      "label": "Heart color",
      "default": "#ff6b6b"
    },
    {
      "type": "range",
      "id": "opacity",
      "min": 10,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Opacity",
      "default": 70
    },
    {
      "type": "header",
      "content": "Effects"
    },
    {
      "type": "checkbox",
      "id": "show_pulse",
      "label": "Show pulse animation",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_glow",
      "label": "Show glow effect",
      "default": false
    },
    {
      "type": "range",
      "id": "glow_intensity",
      "min": 2,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Glow intensity",
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Wishlist heart icon"
    }
  ],
  "tag": null
}
{% endschema %}